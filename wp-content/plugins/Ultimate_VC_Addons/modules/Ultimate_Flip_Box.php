<?php/** Add-on Name: Flip Box for Visual Composer* Add-on URI: http://dev.brainstormforce.com*/if(!class_exists('AIO_Flip_Box')){	class AIO_Flip_Box	{		function __construct()		{			add_action('admin_init',array($this,'block_init'));			add_shortcode('icon_counter',array($this,'block_shortcode'));		}		function block_init()		{			if(function_exists('vc_map'))			{				vc_map(					array(					   "name" => __("翻转盒子"),					   "base" => "icon_counter",					   "class" => "vc_flip_box",					   "icon" => "vc_icon_block",					   "category" => __("旗舰版 VC 扩展","smile"),					   "description" => __("图标, 一些信息 &amp; CTA. 弹上徘徊.","smile"),					   "params" => array(							array(								"type" => "dropdown",								"class" => "",								"heading" => __("图标显示:", "smile"),								"param_name" => "icon_type",								"value" => array(									"Font Icon Manager" => "selector",									"Custom Image Icon" => "custom",								),								"description" => __("使用现有的字体图标</a> 或上传自定义图像.", "smile")							),							array(								"type" => "icon_manager",								"class" => "",								"heading" => __("选择图标 ","smile"),								"param_name" => "icon",								"value" => "",								"description" => __("单击并选择您选择的图标.如果你不能找到一个适合你的目的,你可以 <a href='admin.php?page=font-icon-Manager' target='_blank'>add new here</a>.", "flip-box"),								"dependency" => Array("element" => "icon_type","value" => array("selector")),							),							array(								"type" => "attach_image",								"class" => "",								"heading" => __("上传图片的缩略图:", "smile"),								"param_name" => "icon_img",								"value" => "",								"description" => __("上传自定义图片图标.", "smile"),								"dependency" => Array("element" => "icon_type","value" => array("custom")),							),							array(								"type" => "number",								"class" => "",								"heading" => __("图像宽度 ", "smile"),								"param_name" => "img_width",								"value" => 48,								"min" => 16,								"max" => 512,								"suffix" => "px",								"description" => __("提供图像宽度", "smile"),								"dependency" => Array("element" => "icon_type","value" => array("custom")),							),							array(								"type" => "number",								"class" => "",								"heading" => __("图标的大小", "smile"),								"param_name" => "icon_size",								"value" => 32,								"min" => 12,								"max" => 72,								"suffix" => "px",								"description" => __("你想要多大吗?", "smile"),								"dependency" => Array("element" => "icon_type","value" => array("selector")),							),							array(								"type" => "colorpicker",								"class" => "",								"heading" => __("颜色", "smile"),								"param_name" => "icon_color",								"value" => "#333333",								"description" => __("给它一个好的绘画!", "smile"),								"dependency" => Array("element" => "icon_type","value" => array("selector")),													),							array(								"type" => "dropdown",								"class" => "",								"heading" => __("图标风格", "smile"),								"param_name" => "icon_style",								"value" => array(									"Simple" => "none",									"Circle Background" => "circle",									"Square Background" => "square",									"Design your own" => "advanced",								),								"description" => __("我们有三个快速预定如果你匆忙. 否则,创建自己的各种选择.", "smile"),								"dependency" => Array("element" => "icon_type","value" => array("selector")),							),							array(								"type" => "colorpicker",								"class" => "",								"heading" => __("背景颜色", "smile"),								"param_name" => "icon_color_bg",								"value" => "#ffffff",								"description" => __("为图标选择背景颜色.", "smile"),									"dependency" => Array("element" => "icon_style", "value" => array("circle","square","advanced")),							),							array(								"type" => "dropdown",								"class" => "",								"heading" => __("图标边框样式", "smile"),								"param_name" => "icon_border_style",								"value" => array(									"None" => "",									"Solid" => "solid",									"Dashed" => "dashed",									"Dotted" => "dotted",									"Double" => "double",									"Inset" => "inset",									"Outset" => "outset",								),								"description" => __("选择边框样式图标.","smile"),								"dependency" => Array("element" => "icon_style", "value" => array("advanced")),							),							array(								"type" => "colorpicker",								"class" => "",								"heading" => __("边框色彩", "smile"),								"param_name" => "icon_color_border",								"value" => "#333333",								"description" => __("为图标选择边框颜色.", "smile"),									"dependency" => Array("element" => "icon_border_style", "not_empty" => true),							),							array(								"type" => "number",								"class" => "",								"heading" => __("边框宽度", "smile"),								"param_name" => "icon_border_size",								"value" => 1,								"min" => 1,								"max" => 10,								"suffix" => "px",								"description" => __("边界的厚度.", "smile"),								"dependency" => Array("element" => "icon_border_style", "not_empty" => true),							),							array(								"type" => "number",								"class" => "",								"heading" => __("边框半径 ", "smile"),								"param_name" => "icon_border_radius",								"value" => 500,								"min" => 1,								"max" => 500,								"suffix" => "px",								"description" => __("0像素值将创建一个广场边界. 当你增加价值,形状圆内转换缓慢. (e.g 500 pixels).", "smile"),								"dependency" => Array("element" => "icon_border_style", "not_empty" => true),							),							array(								"type" => "number",								"class" => "",								"heading" => __("背景大小", "smile"),								"param_name" => "icon_border_spacing",								"value" => 50,								"min" => 30,								"max" => 500,								"suffix" => "px",								"description" => __("间距从中心图标到边界的边界/背景", "smile"),								"dependency" => Array("element" => "icon_style", "value" => array("advanced")),							),						array(							"type" => "dropdown",							"class" => "",							"heading" => __("翻转框风格", "smile"),							"param_name" => "flip_box_style",							"value" => array(								"Simple" => "simple",								"Advanced" => "advanced",							),							"description" => __("选择边框样式图标.","smile"),						),						array(							"type" => "number",							"class" => "",							"heading" => __("边界框的大小", "smile"),							"param_name" => "border_size",							"value" => 2,							"min" => 1,							"max" => 10,							"suffix" => "px",							"description" => __("输入值的像素.", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("simple")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("边框色彩", "smile"),							"param_name" => "border_color",							"value" => "#A4A4A4",							"description" => __("选择边界的颜色.", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("simple")),						),						array(							"type" => "dropdown",							"class" => "",							"heading" => __("框边框样式", "smile"),							"param_name" => "box_border_style",							"value" => array(								"None"=> "none",								"Solid"=> "solid",								"Dashed" => "dashed",								"Dotted" => "dotted",								"Double" => "double",								"Inset" => "inset",								"Outset" => "outset",							),							"description" => __("选择框的边框样式.","smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("advanced")),						),						array(							"type" => "number",							"class" => "",							"heading" => __("边界框的大小", "smile"),							"param_name" => "box_border_size",							"value" => 2,							"min" => 1,							"max" => 10,							"suffix" => "px",							"description" => __("输入值的像素.", "smile"),							"dependency" => Array("element" => "box_border_style", "value" => array("solid","dashed","dotted","double","inset","outset")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("正面边框颜色", "smile"),							"param_name" => "box_border_color",							"value" => "#A4A4A4",							"description" => __("选择边界的颜色.", "smile"),							"dependency" => Array("element" => "box_border_style", "value" => array("solid","dashed","dotted","double","inset","outset")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("背面边框颜色", "smile"),							"param_name" => "box_border_color_back",							"value" => "#A4A4A4",							"description" => __("选择边界的颜色.", "smile"),							"dependency" => Array("element" => "box_border_style", "value" => array("solid","dashed","dotted","double","inset","outset")),						),						array(							 "type" => "textfield",							 "class" => "",							 "heading" => __("标题在前面","smile"),							 "param_name" => "block_title_front",							 "admin_label" => true,							 "value" => "",							 "description" => __("也许,这是最突出显示的文本.","smile")						),						  						array(							 "type" => "textfield",							 "class" => "",							 "heading" => __("描述在前面 ","smile"),							 "param_name" => "block_desc_front",							 "value" => "",							 "description" => __("保持精简 !","smile")						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("文本颜色", "smile"),							"param_name" => "text_color",							"value" => "#333333",							"description" => __("标题和描述文本的颜色.", "smile"),								"dependency" => Array("element" => "flip_box_style", "value" => array("simple")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("背景颜色", "smile"),							"param_name" => "bg_color",							"value" => "#efefef",							"description" => __("光为背景颜色更好看.", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("simple")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("正面文字颜色", "smile"),							"param_name" => "block_text_color",							"value" => "#333333",							"description" => __("正面的颜色标题 & 说明篇 .", "smile"),								"dependency" => Array("element" => "flip_box_style", "value" => array("advanced")),													),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("正面背景颜色", "smile"),							"param_name" => "block_front_color",							"value" => "#efefef",							"description" => __("光的颜色更好看在前面.", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("advanced")),														),						array(							 "type" => "textfield",							 "class" => "",							 "heading" => __("标题上回来 ","smile"),							 "param_name" => "block_title_back",							 "admin_label" => true,							 "value" => "",							 "description" => __("一些不错的背面翻转.","smile")						),						array(							 "type" => "textarea",							 "class" => "",							 "heading" => __("返回描述","smile"),							 "param_name" => "block_desc_back",							 "value" => "",							 "description" => __("文本在这里后面都有一个按钮. 所以让它朗朗上口的!","smile")						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("背面的文字颜色", "smile"),							"param_name" => "block_back_text_color",							"value" => "#333333",							"description" => __("背面的颜色标题 & 说明文本 .", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("advanced")),													),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("背面的背景颜色", "smile"),							"param_name" => "block_back_color",							"value" => "#efefef",							"description" => __("选择背景颜色 .", "smile"),							"dependency" => Array("element" => "flip_box_style", "value" => array("advanced")),													),						array(							 "type" => "dropdown",							 "class" => "",							 "heading" => __("链接","smile"),							 "param_name" => "custom_link",							 "value" => array(							 		"No Link" => "",							 		"Add custom link with button" => "1",							 		),							 "description" => __("您可以添加/删除自定义链接","smile")						),						array(							 "type" => "vc_link",							 "class" => "",							 "heading" => __("链接 ","smile"),							 "param_name" => "button_link",							 "value" => "",							 "description" => __("你可以链接或删除现有的链接按钮.","smile"),							 "dependency" => Array("element" => "custom_link", "not_empty" => true, "value" => array("1")),						),						array(							"type" => "textfield",							"class" => "",							"heading" => __("按钮文本","smile"),							"param_name" => "button_text",							"value" => "",							"description" => __("The \"call to action\" text","smile"),							"dependency" => Array("element" => "custom_link", "not_empty" => true, "value" => array("1")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("按钮背景颜色", "smile"),							"param_name" => "button_bg",							"value" => "#333333",							"description" => __("按钮的颜色.确保它将与盒子背面的颜色.", "smile"),							"dependency" => Array("element" => "custom_link", "not_empty" => true, "value" => array("1")),						),						array(							"type" => "colorpicker",							"class" => "",							"heading" => __("按钮文本颜色", "smile"),							"param_name" => "button_txt",							"value" => "#FFFFFF",							"description" => __("选择颜色按钮文本.", "smile"),							"dependency" => Array("element" => "custom_link", "not_empty" => true, "value" => array("1")),						),						array(							"type" => "dropdown",							"class" => "",							"heading" => __("翻转类型 ","smile"),							"param_name" => "flip_type",							"value" => array(								"Flip Horizontally From Left" => "horizontal_flip_left",								"Flip Horizontally From Right" => "horizontal_flip_right",								"Flip Vertically From Top" => "vertical_flip_top",								"Flip Vertically From Bottom" => "vertical_flip_bottom",								"Vertical Door Flip" => "vertical_door_flip",								"Reverse Vertical Door Flip" => "reverse_vertical_door_flip",								"Horizontal Door Flip" => "horizontal_door_flip",								"Reverse Horizontal Door Flip" => "reverse_horizontal_door_flip",								"Book Flip (Beta)" => "style_9",								"Flip From Left (Beta)" => "flip_left",								"Flip From Right (Beta)" => "flip_right",								"Flip From Top (Beta)" => "flip_top",								"Flip From Bottom (Beta)" => "flip_bottom",							),							"description" => __("选择翻转类型翻箱.","smile")						),						array(							"type" => "dropdown",							"class" => "",							"heading" => __("设置框的高度","smile"),							"param_name" => "height_type",							"value" => array(								"Display full the content and adjust height of the box accordingly"=>"ifb-jq-height",								"Hide extra content that doesn't fit in height of the box" => "ifb-auto-height",																"Give a custom height of your choice to the box" => "ifb-custom-height",															),							"description" => __("选择这个盒子的高度选择.","smile")						),						array(							"type" => "number",							"class" => "",							"heading" => __("盒子的高度", "smile"),							"param_name" => "box_height",							"value" => 300,							"min" => 200,							"max" => 1200,							"suffix" => "px",							"description" => __("提供盒子的高度", "smile"),							"dependency" => Array("element" => "height_type","value" => array("ifb-custom-height")),						),						array(							"type" => "textfield",							"class" => "",							"heading" => __("额外的类别", "smile"),							"param_name" => "el_class",							"value" => "",							"description" => __("添加额外的类名,将被应用到图标的过程,并且您可以使用这个类为你定制.", "smile"),							),						),					)				);			}		}		// Shortcode handler function for  icon block		function block_shortcode($atts)		{			// enqueue js			wp_enqueue_script('ultimate-appear');			if(get_option('ultimate_row') == "enable"){				wp_enqueue_script('ultimate-row-bg',plugins_url('../assets/js/',__FILE__).'ultimate_bg.js');			}			wp_enqueue_script('ultimate-custom');			// enqueue css			wp_enqueue_style('ultimate-animate');			wp_enqueue_style('ultimate-style');			wp_enqueue_style('aio-flip-style',plugins_url('../assets/css/',__FILE__).'flip-box.css');			$icon_type = $icon_img = $img_width = $icon = $icon_color = $icon_color_bg = $icon_size = $icon_style = $icon_border_style = $icon_border_radius = $icon_color_border = $icon_border_size = $icon_border_spacing = $icon_link = $el_class = $icon_animation = $block_title_front = $block_desc_front = $block_title_back = $block_desc_back = $button_text = $button_link = $block_text_color = $block_front_color = $block_back_color = $el_class = $block_back_text_color = $animation = $font_size_icon = $box_border_style = $box_border_size = $box_border_color = $border_size = $border_color = $box_border_color_back = $custom_link = $button_bg = $button_txt = $height_type = $box_height = $flip_type = $flip_box_style = $text_color = $bg_color = $front_text = $back_text = '';			extract(shortcode_atts( array(				'icon_type' => '',				'icon' => '',				'icon_img' => '',				'img_width' => '',				'icon_size' => '',								'icon_color' => '',				'icon_style' => '',				'icon_color_bg' => '',				'icon_color_border' => '',							'icon_border_style' => '',				'icon_border_size' => '',				'icon_border_radius' => '',				'icon_border_spacing' => '',				'icon_link' => '',				'icon_animation' => '',				'block_title_front' => '',				'block_desc_front' => '',				'block_title_back' => '',				'block_desc_back' =>'',				'custom_link' => '',				'button_text' =>'',				'button_link' =>'',				'button_bg' => '',				'button_txt' => '',				'flip_type' =>'',				'text_color' => '',				'bg_color' => '',				'block_text_color' =>'',				'block_front_color' =>'',				'block_back_color' =>'',				'el_class' =>'',				'block_back_text_color' =>'',				'border_size' => '', 				'border_color' => '', 				'box_border_style' => '', 				'box_border_size' => '', 				'box_border_color' => '', 				'box_border_color_back' => '',				'height_type' => '',				'box_height' => '',				'flip_box_style' => '',			),$atts));				$output = $f_style = $b_style = $ico_color = $box_border = $icon_border = $link_style = $height = $link_sufix = $link_prefix = $link_style = '';			if($icon_type == 'custom'){				$icon_style = 'none';			}			$flip_icon = do_shortcode('[just_icon icon_type="'.$icon_type.'" icon="'.$icon.'" icon_img="'.$icon_img.'" img_width="'.$img_width.'" icon_size="'.$icon_size.'" icon_color="'.$icon_color.'" icon_style="'.$icon_style.'" icon_color_bg="'.$icon_color_bg.'" icon_color_border="'.$icon_color_border.'"  icon_border_style="'.$icon_border_style.'" icon_border_size="'.$icon_border_size.'" icon_border_radius="'.$icon_border_radius.'" icon_border_spacing="'.$icon_border_spacing.'" icon_link="'.$icon_link.'" icon_animation="'.$icon_animation.'"]');			$css_trans = $icon_border = $box_border = '';			$height = '';			if($icon_border_style !== 'none')			{				$icon_border .= 'border-style: '.$icon_border_style.';';				$icon_border .= 'border-width: '.$icon_border_size.'px;';			}			if($height_type == "ifb-custom-height"){				$height = 'height:'.$box_height.'px;';				$flip_type .= ' flip-box-custom-height';			}			if($flip_box_style !== 'simple'){				$border_front =  'border-color:'.$box_border_color.';';				$border_back =  'border-color:'.$box_border_color_back.';';				if($box_border_style !== 'none')				{					$box_border .= 'border-style: '.$box_border_style.';';					$box_border .= 'border-width: '.$box_border_size.'px;';				}				if($animation !== 'none')				{					$css_trans = 'data-animation="'.$animation.'" data-animation-delay="03"';				}				if($block_text_color != ''){					$f_style .='color:'.$block_text_color.';';					$front_text .='color:'.$block_text_color.';';				}				if($block_front_color != '')					$f_style .= 'background:'.$block_front_color.';';				if($block_back_text_color != ''){					$b_style .='color:'.$block_back_text_color.';';					$back_text .='color:'.$block_back_text_color.';';				}				if($block_back_color != '')					$b_style .= 'background:'.$block_back_color.';';			} else {				if($text_color != ''){					$f_style .='color:'.$text_color.';';					$b_style .='color:'.$text_color.';';					$front_text = $back_text = 'color:'.$text_color.';';				}				if($bg_color != '')				{					$f_style .= 'background:'.$bg_color.';';					$b_style .= 'background:'.$bg_color.';';				}				if($border_color != ''){					$border_front =  'border-color:'.$border_color.';';					$border_back =  'border-color:'.$border_color.';';					$box_border = 'border-width: '.$border_size.'px;';					$box_border .= 'border-style: solid;';				}			}			$output .= '<div class="flip-box-wrap">';			$output .= '<div class="flip-box '.$height_type.' '.$el_class.' '. $flip_type .'" '.$css_trans.' style="'.$height.'">';			$output .= '<div class="ifb-flip-box">';				$output .= '<div class="ifb-face ifb-front" style="'.$f_style.' '.$box_border.' '.$border_front.'">';						if($icon !== '' || $icon_img !== '')								$output.='<div class="flip-box-icon">'.$flip_icon.'</div>';						if($block_title_front!='')							$output.='<h3 style="'.$front_text.'">'.$block_title_front.'</h3>';						if($block_desc_front!='')							$output.='<p>'.$block_desc_front.'</p>';					$output.='</div><!-- END .front -->						<div class="ifb-face ifb-back" style="'.$b_style.' '.$box_border.' '.$border_back.'">';							if($block_title_back!='')								$output.='<h3 style="'.$back_text.'">'.$block_title_back.'</h3>';							if($block_desc_back!=''){								if($button_link !== ''){									$output .= '<div class="ifb-desc-back">';								}								$output.='<p>'.$block_desc_back.'</p>';								if($button_link !== ''){									$output .= '</div>';								}							}							if($button_text!== '' && $custom_link){								$link_prefix = '<div class="flip_link">';								if($button_bg !== '' && $button_txt !== '')									$link_style = 'style="background:'.$button_bg.'; color:'.$button_txt.';"';								if($button_link!== ''){																	$href = vc_build_link($button_link);									if(isset($href['target'])){										$target = 'target="'.$href['target'].'"';									}									$link_prefix .= '<a href = "'.$href['url'].'" '.$target.' '.$link_style.'>';									$link_sufix .= '</a>';								}								$link_sufix .= '</div>';								$output.=$link_prefix.$button_text.$link_sufix;							}						$output.='</div><!-- END .back -->';					$output .= '</div> <!-- ifb-flip-box -->';				$output .= '</div> <!-- flip-box -->';			$output .='</div><!-- End icon block -->';			return $output;				}	}	//instantiate the class	new AIO_Flip_Box;}